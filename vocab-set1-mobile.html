<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>ç¬¬ä¸€çµ„è©å½™ï¼ˆæ‰‹æ©Ÿç‰ˆï¼‰</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text"; }
  body {
    margin: 0;
    padding: 16px;
    background: #f5f5f5;
    display: flex;
    justify-content: center;
  }

  .app {
    width: 100%;
    max-width: 520px;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 5px 16px rgba(0,0,0,0.1);
    padding: 20px;
  }

  h1 { text-align: center; margin-bottom: 8px; }
  .subtitle { text-align: center; font-size: 13px; color: #666; margin-bottom: 12px; }

  /* èªé€ŸæŒ‰éˆ•ï¼ˆæ‰‹æ©Ÿå¤§å°ºå¯¸ï¼‰ */
  .speed-controls {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 15px;
  }
  .speed-btn {
    padding: 6px 14px;
    font-size: 14px;
    border-radius: 20px;
    border: none;
    background: #eee;
    cursor: pointer;
  }
  .speed-btn.active {
    background: #ffd86b;
    color: #543a00;
    font-weight: 600;
  }

  /* å¡ç‰‡ */
  .card {
    width: 100%;
    perspective: 1000px;
    cursor: pointer;
    margin-bottom: 12px;
    position: relative;
    transition: margin-bottom .3s ease;
  }
  .card-expanded { margin-bottom: 180px; }

  .card-inner {
    width: 100%;
    position: relative;
    transition: transform .6s;
    transform-style: preserve-3d;
  }
  .card.flipped .card-inner { transform: rotateY(180deg); }

  .card-face {
    position: absolute;
    width: 100%;
    min-height: 240px;
    padding: 20px;
    border-radius: 14px;
    border: 1px solid #ddd;
    background: #fafafa;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  .card-front { 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    flex-direction: column;
  }
  .card-back { transform: rotateY(180deg); }

  .jp-word-front {
    font-size: 48px;
    margin-bottom: 6px;
  }
  .front-hint {
    font-size: 13px;
    color: #777;
  }

  /* æ”¶è—æ˜Ÿæ˜Ÿ */
  .fav-icon {
    position: absolute;
    top: 8px;
    right: 12px;
    font-size: 26px;
    cursor: pointer;
    z-index: 10;
  }

  /* table */
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 15px;
  }
  th {
    text-align: left;
    width: 110px;
    color: #888;
    padding: 6px 4px;
  }
  td {
    color: #222;
    padding: 6px 4px;
  }

  /* å¤§ä¸€é»çš„ğŸ”Š */
  .audio-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    margin-left: 6px;
  }

  /* æŒ‰éˆ• */
  .controls {
    display: flex;
    justify-content: space-between;
    gap: 10px;
  }
  button.nav {
    flex: 1;
    padding: 12px 0;
    font-size: 16px;
    border-radius: 999px;
    border: none;
    background: #eee;
  }

  .index {
    text-align: center;
    margin-top: 10px;
    color: #777;
    font-size: 14px;
  }
</style>
</head>

<body>
<div class="app">

<h1>ç¬¬ä¸€çµ„è©å½™ï¼ˆæ‰‹æ©Ÿç‰ˆï¼‰</h1>
<div class="subtitle">é»æ“Šå¡ç‰‡åè½‰ï½œé»å­—æˆ–ğŸ”Šæ’­æ”¾èªéŸ³ï½œæ‰‹æ©Ÿå°ˆç”¨</div>

<!-- èªé€Ÿ -->
<div class="speed-controls">
  <button class="speed-btn" data-rate="0.6">ğŸŒ è¶…æ…¢</button>
  <button class="speed-btn" data-rate="0.8">ğŸ¢ æ…¢</button>
  <button class="speed-btn active" data-rate="1.0">ğŸ˜€ æ™®é€š</button>
</div>

<!-- å¡ç‰‡ -->
<div class="card" id="card">
  <div class="fav-icon" id="favIcon">â˜†</div>

  <div class="card-inner">

    <!-- æ­£é¢ -->
    <div class="card-face card-front">
      <div class="jp-word-front" id="jpWordFront"></div>
      <div class="front-hint">ï¼ˆé»æˆ‘æ’­æ”¾è®€éŸ³ï¼‰</div>
    </div>

    <!-- èƒŒé¢ -->
    <div class="card-face card-back">
      <table>
        <tr><th>è©æ€§</th><td id="posBack"></td></tr>
        <tr><th>ç¾…é¦¬éŸ³</th><td id="romajiBack"></td></tr>
        <tr><th>ä¸­æ–‡</th><td id="cnBack"></td></tr>

        <tr>
          <th>æ¼¢å­—å‡åä¾‹å¥</th>
          <td>
            <span id="exampleJpAlt"></span>
            <button class="audio-btn" id="audioSentenceAltBtn">ğŸ”Š</button>
          </td>
        </tr>

        <tr>
          <th>æ—¥æ–‡ä¾‹å¥</th>
          <td>
            <span id="exampleJpBack"></span>
            <button class="audio-btn" id="audioSentenceBtn">ğŸ”Š</button>
          </td>
        </tr>

        <tr><th>ä¸­æ–‡ä¾‹å¥</th><td id="exampleCnBack"></td></tr>
        <tr><th>èªæ³•</th><td id="grammarBack"></td></tr>
      </table>
    </div>
  </div>
</div>

<!-- Controls -->
<div class="controls">
  <button class="nav" id="prevBtn">ä¸Šä¸€å€‹</button>
  <button class="nav" id="nextBtn">ä¸‹ä¸€å€‹</button>
</div>
<div class="index" id="indexInfo"></div>

<script>
/* --- Vocab Data --- */
const vocab = [
  {
    jp:"ã‚ãŸã—",
    romaji:"watashi",
    pos:"åè©ï½œä»£åè©",
    cn:"æˆ‘",
    exampleJp:"ã‚ãŸã—ã¯ ã‚Šã‚“ã”ãŒ ã™ãã§ã™ã€‚",
    exampleJpAlt:"ç§ã¯ãƒªãƒ³ã‚´ãŒå¥½ãã§ã™ã€‚",
    exampleCn:"æˆ‘å–œæ­¡è˜‹æœã€‚",
    grammar:"å¸¸é…ã€Œã¯ã€ç•¶ä¸»é¡Œã€‚"
  },
  {
    jp:"ã‚ãªãŸ",
    romaji:"anata",
    pos:"ä»£åè©",
    cn:"ä½ ",
    exampleJp:"ã‚ãªãŸã¯ ã©ã“ã‹ã‚‰ ãã¾ã—ãŸã‹ã€‚",
    exampleJpAlt:"ã‚ãªãŸã¯ã©ã“ã‹ã‚‰æ¥ã¾ã—ãŸã‹ã€‚",
    exampleCn:"ä½ å¾å“ªè£¡ä¾†ï¼Ÿ",
    grammar:"å¯¦éš›å°è©±å°‘ç›´æ¥è¬›ã€Œä½ ã€ã€‚"
  },
  {
    jp:"ã‚ã®ã²ã¨",
    romaji:"ano hito",
    pos:"åè©",
    cn:"é‚£å€‹äºº",
    exampleJp:"ã‚ã®ã²ã¨ã¯ ã‹ã„ã—ã‚ƒã„ã‚“ã§ã™ã€‚",
    exampleJpAlt:"ã‚ã®äººã¯ä¼šç¤¾å“¡ã§ã™ã€‚",
    exampleCn:"é‚£å€‹äººæ˜¯å…¬å¸è·å“¡ã€‚",
    grammar:"ç¦®è²Œèªï¼šã‚ã®ã‹ãŸã€‚"
  },
  {
    jp:"ã‹ã‚Œ",
    romaji:"kare",
    pos:"ä»£åè©",
    cn:"ä»–",
    exampleJp:"ã‹ã‚Œã¯ ãŒãã›ã„ã§ã™ã€‚",
    exampleJpAlt:"å½¼ã¯å­¦ç”Ÿã§ã™ã€‚",
    exampleCn:"ä»–æ˜¯å­¸ç”Ÿã€‚",
    grammar:"æœ‰æ™‚å¯æŒ‡ã€Œç”·æœ‹å‹ã€ã€‚"
  }
];

/* --- DOM --- */
const card = document.getElementById("card");
const favIcon = document.getElementById("favIcon");
const jpWordFront = document.getElementById("jpWordFront");
const posBack = document.getElementById("posBack");
const romajiBack = document.getElementById("romajiBack");
const cnBack = document.getElementById("cnBack");
const exampleJpBack = document.getElementById("exampleJpBack");
const exampleJpAlt = document.getElementById("exampleJpAlt");
const exampleCnBack = document.getElementById("exampleCnBack");
const grammarBack = document.getElementById("grammarBack");

const audioSentenceBtn = document.getElementById("audioSentenceBtn");
const audioSentenceAltBtn = document.getElementById("audioSentenceAltBtn");

const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const indexInfo = document.getElementById("indexInfo");

let idx = 0;
let speechRate = 1.0;
let hardSet = new Set();

/* --- Speech Function --- */
function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "ja-JP";
  u.rate = speechRate;
  speechSynthesis.speak(u);
}

/* --- Update Card --- */
function loadCard(){
  const v = vocab[idx];
  jpWordFront.textContent = v.jp;
  posBack.textContent = v.pos;
  romajiBack.textContent = v.romaji;
  cnBack.textContent = v.cn;
  exampleJpAlt.textContent = v.exampleJpAlt;
  exampleJpBack.textContent = v.exampleJp;
  exampleCnBack.textContent = v.exampleCn;
  grammarBack.textContent = v.grammar;

  indexInfo.textContent = `ç¬¬ ${idx+1} / ${vocab.length} å€‹`;

  prevBtn.disabled = idx === 0;
  nextBtn.disabled = idx === vocab.length - 1;

  favIcon.textContent = hardSet.has(v.jp) ? "â˜…" : "â˜†";
}

/* --- Events --- */
jpWordFront.onclick = (e)=>{
  e.stopPropagation();
  speak(vocab[idx].jp);
};

audioSentenceBtn.onclick = e=>{
  e.stopPropagation();
  speak(vocab[idx].exampleJp);
};
audioSentenceAltBtn.onclick = e=>{
  e.stopPropagation();
  speak(vocab[idx].exampleJpAlt);
};

card.onclick = (e)=>{
  if (e.target===favIcon) return;
  card.classList.toggle("flipped");
  card.classList.toggle("card-expanded");
};

prevBtn.onclick = ()=>{
  if(idx>0){
    idx--;
    card.classList.remove("flipped","card-expanded");
    loadCard();
  }
};
nextBtn.onclick = ()=>{
  if(idx<vocab.length-1){
    idx++;
    card.classList.remove("flipped","card-expanded");
    loadCard();
  }
};

/* èªé€ŸæŒ‰éˆ• */
document.querySelectorAll(".speed-btn").forEach(btn=>{
  btn.onclick = ()=>{
    document.querySelectorAll(".speed-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    speechRate = Number(btn.dataset.rate);
  };
});

/* æ”¶è—æ˜Ÿæ˜Ÿ */
favIcon.onclick = e=>{
  e.stopPropagation();
  const word = vocab[idx].jp;
  hardSet.has(word) ? hardSet.delete(word) : hardSet.add(word);
  favIcon.textContent = hardSet.has(word) ? "â˜…" : "â˜†";
};

/* Init */
loadCard();
</script>

</body>
</html>
